<!-- src/app/pages/products/product-form/product-form.component.html -->
<div class="card">
  <div class="card-header">
    <h2 style="margin:0">{{ id ? 'Editar' : 'Crear' }} producto</h2>
    <a class="btn btn-outline" routerLink="/products">‚Üê Volver</a>
  </div>

  <div class="card-body">
    <form [formGroup]="form" (ngSubmit)="save()" class="form-grid">
      <div class="form-col-6">
        <label>Nombre</label>
        <input class="input" formControlName="name"
               [class.invalid]="form.controls.name.touched && form.controls.name.invalid" />
        <div class="error" *ngIf="form.controls.name.touched && form.controls.name.invalid">
          Requerido (m√≠n. 2 caracteres).
        </div>
      </div>

      <div class="form-col-6">
        <label>Precio</label>
        <input type="number" step="0.01" class="input" formControlName="price"
               [class.invalid]="form.controls.price.touched && form.controls.price.invalid" />
        <div class="error" *ngIf="form.controls.price.touched && form.controls.price.invalid">
          Debe ser mayor a 0.1.
        </div>
      </div>

      <div class="form-col-12">
        <label>Descripci√≥n</label>
        <textarea rows="3" class="input" formControlName="description"
                  [class.invalid]="form.controls.description.touched && form.controls.description.invalid"></textarea>
        <div class="error" *ngIf="form.controls.description.touched && form.controls.description.invalid">
          Requerido (m√≠n. 2 caracteres).
        </div>
        <div class="helper">Describe el producto (modelo, tama√±o, etc.).</div>
      </div>

      <div class="form-col-6">
        <label>Categor√≠a</label>
        <select class="select" formControlName="category"
                [class.invalid]="form.controls.category.touched && form.controls.category.invalid">
          <option [ngValue]="null">Seleccione</option>
          <ng-container *ngIf="(categories$ | async) as cats">
            <option *ngFor="let c of cats" [ngValue]="c.id">{{ c.name }}</option>
          </ng-container>
        </select>
        <div class="error" *ngIf="form.controls.category.touched && form.controls.category.invalid">
          Seleccione una categor√≠a.
        </div>
      </div>

      <div class="form-col-12" style="display:flex; gap:.6rem; margin-top:.5rem">
        <button type="submit" class="btn btn-primary">üíæ Guardar</button>
        <a routerLink="/products" class="btn btn-outline">Cancelar</a>
      </div>
    </form>
  </div>
</div>
